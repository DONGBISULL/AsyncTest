
# 비동기 프로그래밍

Async 통신
실시간성 응답 필요하지 않은 상황에 사용

Ex) Notification , Email , Push 알림

main Thread 가 task 처리하는것이 아니라
Sub Thread 에게 task 위임

비동기 => sub thead 에서 작업 진행
java ThreadPool 생성하여 async 작업 처리

## 스레드 옵션

> 1. CorePoolSize

    스레드풀에 최소한 스레드를 몇개 가지고 있을 지를 지정하는 옵션
    
    (최소한 minimum 리소스를 점유할 스레드의 사이즈)

> 2. MaxPoolSize

    최대 몇 개까지 스레드를 할당할 지 사이즈 

> 3. workQueue

    먼저 들어온 순서로 처리할 수 있도록 큐를 사용하여 많은 요청들을 담아뒀다가 순차적으로 실행

> 4. KeepAliveTime

    코어풀 사이즈보다 더 많은 스레드 할당 시 스레드 반환 
    내가 지정한 시간만큼 스레드들이 일하지 않을 경우 자원 반납시키도록 하는 옵션
    Long 타입 : 시간 분 초 설정위한 유닛 단위


참고

스레드풀: 스레드가 여러개 있는 풀

생성 순서

코어풀 사이즈 스레드 생성
-> 코어풀 사이즈를 넘치는 요청 워크큐(Oueue)에 담기
-> 워크큐 사이즈만큼 새로운 요청 담기
-> (워크큐에 지정한 사이즈만큼 요청이 쌓였을 경우) 맥시멈 풀 사이즈만큼 스레드 생성


Core Pool Size 값을 크게 설정할 경우 Side Effect 고려

-> 너무 큰값 설정 시 잘 사용 안되도 많은 스레드 점유할 수도 있음

-> 사용도를 잘 파악하여 설정 해야함


